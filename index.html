<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPICA è¨ºæ–­</title>
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding-top: 50px; }
    .loader { font-size: 18px; color: #06c755; font-weight: bold; }
  </style>
</head>
<body>
  <div class="loader">
    ğŸš€ è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ ã¸ç§»å‹•ä¸­...<br>
    <span style="font-size:12px; color:#999;">(GitHubç‰ˆ)</span>
  </div>

  <script>
    // â–¼ã“ã“ã«ã‚ãªãŸã®æƒ…å ±ã‚’å…¥ã‚Œã¦ãã ã•ã„
    const MY_LIFF_ID = '2008882590-CYPYSTNq';
    const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfrWyA3ReUMtSc32hdvkfERz_R9h1cDRNK0EkD7zHcv_GYwWg/viewform?usp=header';
    const ENTRY_ID = 'entry.1513418329';

    window.onload = function() {
      liff.init({ liffId: MY_LIFF_ID })
        .then(() => {
          if (!liff.isLoggedIn()) {
            liff.login();
          } else {
            liff.getProfile().then(profile => {
              // ãƒ•ã‚©ãƒ¼ãƒ ã¸è»¢é€
              const finalUrl = `${GOOGLE_FORM_URL}?usp=pp_url&${ENTRY_ID}=${profile.userId}`;
              window.location.replace(finalUrl);
            });
          }
        })
        .catch(err => {
          document.body.innerHTML = '<p style="color:red">ã‚¨ãƒ©ãƒ¼:<br>' + err + '</p>';
        });
    };
  </script>
</body>
</html>
